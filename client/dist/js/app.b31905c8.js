(function(){"use strict";var e={5803:function(e,t,n){var o=n(9963),a=n(6252);const r={id:"app"};function l(e,t,n,o,l,i){const s=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(s)])}var i={name:"App"},s=n(3744);const u=(0,s.Z)(i,[["render",l]]);var c=u,d=n(3907),p=(n(7658),n(6154));function h(e){return e.interceptors.request.use((e=>(e.headers["Content-Type"]="application/json",e)),(e=>Promise.reject(e.response))),e.interceptors.response.use((e=>e),(e=>Promise.reject(e.response))),e}function f(e,t){const n=p.Z.create(Object.assign({baseURL:e},t));return h(n),n}const _="http://localhost:8007",g=f(_),J="/journal";function m(e){return g.get(J,{params:e})}function v(e){return g.post(J,e)}function y(e){return g.put(J,e)}function O(e){return g["delete"](`${J}/${e}`)}var w={get:m,add:v,edit:y,remove:O},D=n(2262);const U=(0,D.qj)({journals:[],selectedJournal:{}}),b={getJournals(e){return JSON.parse(JSON.stringify(e.journals))},getSelectedJournal(e){return e.selectedJournal}},R={async FETCH_JOURNALS({commit:e}){try{const t=localStorage.getItem("user_id"),{data:n}=await w.get({user_id:t});return n&&e("SET_JOURNALS",n),n}catch(t){console.log(t)}},async ADD_JOURNAL({commit:e},t){try{const{data:n}=await w.add(t);return e("ADD_JOURNAL",n[0]),n}catch(n){console.log(n)}},async EDIT_JOURNAL({commit:e},t){try{const{data:n}=await w.edit(t);return e("EDIT_JOURNAL",n),n}catch(n){console.log(n)}},async REMOVE_JOURNAL({commit:e},t){try{const{data:n}=await w.remove(t);return e("REMOVE_JOURNAL",t),n}catch(n){console.log(n)}}},j={SET_JOURNALS(e,t){e.journals=t},ADD_JOURNAL(e,t){e.journals.push(t)},EDIT_JOURNAL(e,t){const{_id:n}=t,o=e.journals.findIndex((e=>e._id===n));e.journals[o]=t,e.selectedJournal=e.journals[o]},REMOVE_JOURNAL(e,t){const n=e.journals.findIndex((e=>e._id==t));e.journals.splice(n,1)},SELECT_JOURNAL(e,t){e.selectedJournal=t}};var A={namespaced:!0,state:U,getters:b,actions:R,mutations:j},E=(0,d.MT)({state:{userId:""},getters:{getUserId(e){return e.userId}},actions:{},mutations:{SET_USER_ID(e,t){e.userId=t}},modules:{journal:A}}),L=n(2201);function S(e,t,n,r,l,i){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.id=e)},null,512),[[o.nr,l.id]])]),(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.pw=e)},null,512),[[o.nr,l.pw]])]),(0,a._)("button",{onClick:t[2]||(t[2]=(...e)=>i.login&&i.login(...e))},"확인")])}function k(e){return g.post("/login",e)}function N(e){return g.post("/register",e)}var I={login:k,register:N},C={name:"LoginView",data(){return{id:"",pw:""}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await I.login({id:this.id,pw:this.pw});localStorage.setItem("user_id",e.user_id),this.$router.push("/main")}catch(e){console.log(e)}}}};const T=(0,s.Z)(C,[["render",S]]);var V=T,x=n(3577);const F=e=>((0,a.dD)("data-v-f20610b6"),e=e(),(0,a.Cn)(),e),M={class:"title"},q=F((()=>(0,a._)("i",{class:"fa-solid fa-angle-left"},null,-1))),P=[q],H=F((()=>(0,a._)("i",{class:"fa-solid fa-angle-right"},null,-1))),Z=[H],$=F((()=>(0,a._)("i",{class:"fa-solid fa-pen-to-square"},null,-1))),B=[$],K=["onUpdate:modelValue","onChange"],W=["data-id","onUpdate:modelValue","onFocus"],z=["onClick"],Y=F((()=>(0,a._)("i",{class:"fa-solid fa-xmark"},null,-1))),G=[Y],Q={class:"journal pending"},X=F((()=>(0,a._)("i",{class:"fa-solid fa-circle-plus"},null,-1))),ee=[X];function te(e,t,n,r,l,i){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",M,[(0,a._)("button",{onClick:t[0]||(t[0]=e=>i.updateDate(-1))},P),(0,a._)("h2",null,(0,x.zw)(i.dailyFormat),1),(0,a._)("button",{onClick:t[1]||(t[1]=e=>i.updateDate(1))},Z)]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.dailyJournals,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e._id,class:(0,x.C_)(["journal",{on:i.isSelectedJournal(e)}])},[(0,a._)("button",{class:"button-edit",onClick:t[2]||(t[2]=e=>i.editJournal())},B),(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checked=t,onChange:t=>i.editJournal(e)},null,40,K),[[o.e8,e.checked]]),(0,a.wy)((0,a._)("input",{type:"text","data-id":e._id,"onUpdate:modelValue":t=>e.content=t,onFocus:t=>i.selectJournal(e),onKeydown:[t[3]||(t[3]=(0,o.D2)((e=>i.editJournal()),["enter"])),t[4]||(t[4]=(0,o.D2)(((...e)=>i.handleBackspaceInput&&i.handleBackspaceInput(...e)),["backspace"]))]},null,40,W),[[o.nr,e.content]]),(0,a._)("button",{class:"button-remove",onClick:t=>i.removeJournal(e._id)},G,8,z)],2)))),128)),(0,a._)("div",Q,[(0,a._)("button",{class:"button-add",onClick:t[5]||(t[5]=(...e)=>i.addJournal&&i.addJournal(...e))},ee),(0,a._)("input",{type:"text",id:"pending-journal",onKeydown:t[6]||(t[6]=(0,o.D2)(((...e)=>i.addJournal&&i.addJournal(...e)),["enter"]))},null,32)])])])}var ne={name:"MainView",data(){return{selectedDate:new Date,selectedJournal:{}}},computed:{...(0,d.rn)(["userId"]),...(0,d.Se)("journal",["getJournals"]),dailyFormat(){const e=e=>e.toISOString().slice(0,10);return e(this.selectedDate)},dailyJournals(){const e=this.getJournals.filter((e=>e.date.startsWith(this.dailyFormat)));return e},isSelectedJournal(){return({_id:e})=>this.selectedJournal._id==e}},created(){this.init()},methods:{...(0,d.nv)("journal",["FETCH_JOURNALS","ADD_JOURNAL","EDIT_JOURNAL","REMOVE_JOURNAL"]),init(){this.FETCH_JOURNALS()},updateDate(e){const t=this.selectedDate.getDate()+e;this.selectedDate=new Date(this.selectedDate.setDate(t))},async addJournal(){const e=document.querySelector("#pending-journal");if(e?.value)try{const t={content:e.value,date:this.selectedDate};await this.ADD_JOURNAL(t),e.value=""}catch(t){console.log(t)}},async editJournal(e){const{_id:t,content:n,checked:o}=e||this.selectedJournal;try{await this.EDIT_JOURNAL({_id:t,content:n,checked:o}),e||this.deselectJournal()}catch(a){console.log(a)}},handleBackspaceInput({target:{dataset:e,value:t},repeat:n}){n||t||this.removeJournal(e.id)},async removeJournal(e){try{await this.REMOVE_JOURNAL(e)}catch(t){console.log(t)}},selectJournal(e){this.selectedJournal=e},deselectJournal(){const{_id:e}=this.selectedJournal,t=document.querySelector(`[data-id="${e}"]`);t.blur(),this.selectedJournal={}}}};const oe=(0,s.Z)(ne,[["render",te],["__scopeId","data-v-f20610b6"]]);var ae=oe;const re=(0,L.p7)({history:(0,L.PO)(),routes:[{path:"/",redirect:"/login"},{path:"/login",name:"LoginView",component:V},{path:"/main",name:"MainView",component:ae}]});var le=re;const ie=(0,o.ri)(c);ie.use(E),ie.use(le),ie.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],r=e[c][2];for(var i=!0,s=0;s<o.length;s++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,l=o[0],i=o[1],s=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(s)var c=s(n)}for(t&&t(o);u<l.length;u++)r=l[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5803)}));o=n.O(o)})();
//# sourceMappingURL=app.b31905c8.js.map