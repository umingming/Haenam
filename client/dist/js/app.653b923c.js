(function(){"use strict";var e={5184:function(e,t,n){var a=n(9963),o=n(6252),s=n(3577);function i(e,t,n,a,i,r){const l=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",{id:"wrapper",class:(0,s.C_)({on:r.isAuthView})},[(0,o.Wm)(l)],2)}n(7658);var r={name:"App",computed:{isAuthView(){return"AuthView"===this.$route.name}},created(){const e=localStorage.getItem("user_id")||sessionStorage.getItem("user_id"),t=e?"main":"auth";this.$router.push(`/${t}`)}},l=n(3744);const u=(0,l.Z)(r,[["render",i]]);var c=u,d=n(3907),p=n(6154);function h(e){return e.interceptors.request.use((e=>(e.headers["Content-Type"]="application/json",e)),(e=>Promise.reject(e.response))),e.interceptors.response.use((e=>e),(e=>Promise.reject(e.response))),e}function g(e,t){const n=p.Z.create(Object.assign({baseURL:e},t));return h(n),n}const m="https://haenam-387106.du.r.appspot.com",f=g(m),_="/journal";function v(e){return f.get(_,{params:e})}function w(e){return f.post(_,e)}function y(e){return f.put(_,e)}function D(e){return f["delete"](`${_}/${e}`)}var J={get:v,add:w,edit:y,remove:D},E=n(2262);const O=(0,E.qj)({journals:[],selectedJournal:{},selectedDate:(new Date).toISOString().slice(0,10)}),I={getJournals(e){return JSON.parse(JSON.stringify(e.journals))},getSelectedJournal(e){return e.selectedJournal},getSelectedDate(e){return e.selectedDate}},S={async FETCH_JOURNALS({commit:e}){try{const t=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:n}=await J.get({user_id:t});return n&&e("SET_JOURNALS",n),n}catch(t){console.log(t)}},async ADD_JOURNAL({commit:e},t){try{const n=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:a}=await J.add({user_id:n,...t});return e("ADD_JOURNAL",a[0]),a}catch(n){console.log(n)}},async EDIT_JOURNAL({commit:e},t){try{const{data:n}=await J.edit(t);return e("EDIT_JOURNAL",n),n}catch(n){console.log(n)}},async REMOVE_JOURNAL({commit:e},t){try{const{data:n}=await J.remove(t);return e("REMOVE_JOURNAL",t),n}catch(n){console.log(n)}}},b={SET_JOURNALS(e,t){e.journals=t},ADD_JOURNAL(e,t){e.journals.push(t)},EDIT_JOURNAL(e,t){const{_id:n}=t,a=e.journals.findIndex((e=>e._id===n));e.journals[a]=t,e.selectedJournal=e.journals[a]},REMOVE_JOURNAL(e,t){const n=e.journals.findIndex((e=>e._id==t));n>-1&&e.journals.splice(n,1)},SELECT_JOURNAL(e,t){e.selectedJournal=t},SELECT_DATE(e,t){e.selectedDate=t},UPDATE_JOURNAL_INDEX(e,{fromIndex:t,toIndex:n}){const a=e.journals.splice(t,1)[0];e.journals.splice(n,0,a)}};var k={namespaced:!0,state:O,getters:I,actions:S,mutations:b},x=(0,d.MT)({state:{userId:""},getters:{getUserId(e){return e.userId}},actions:{},mutations:{SET_USER_ID(e,t){e.userId=t}},modules:{journal:k}}),C=n(2201);const U={id:"login",class:"box"},A={id:"login-left"},j=(0,o._)("h1",null,[(0,o.Uk)("오늘도 "),(0,o._)("span",null,"해냄!")],-1),T={id:"login-select"},L=(0,o._)("div",{id:"login-right"},null,-1);function R(e,t,n,a,i,r){const l=(0,o.up)("base-button"),u=(0,o.up)("login-form"),c=(0,o.up)("register-form");return(0,o.wg)(),(0,o.iD)("div",U,[(0,o._)("div",A,[j,(0,o._)("div",T,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.formNames,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{key:t,class:(0,s.C_)({on:r.isFormSelected(t)}),name:e,onOnClick:e=>r.selectForm(t)},null,8,["class","name","onOnClick"])))),128))]),r.isFormSelected(0)?((0,o.wg)(),(0,o.j4)(u,{key:0})):((0,o.wg)(),(0,o.j4)(c,{key:1,onOk:t[0]||(t[0]=e=>r.selectForm(0))}))]),L])}const N={id:"login-form"},V={class:"login-text"},B=(0,o._)("label",{for:"id"},"아이디",-1),F={class:"login-text"},$=(0,o._)("label",{for:"pw"},"비밀번호",-1),M={class:"login-keep"},P=(0,o._)("label",{for:"keep-check"},"로그인 상태 유지",-1);function Z(e,t,n,s,i,r){return(0,o.wg)(),(0,o.iD)("div",N,[(0,o._)("div",V,[B,(0,o.wy)((0,o._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>i.id=e)},null,512),[[a.nr,i.id]])]),(0,o._)("div",F,[$,(0,o.wy)((0,o._)("input",{type:"password",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>i.pw=e)},null,512),[[a.nr,i.pw]])]),(0,o._)("div",M,[(0,o.wy)((0,o._)("input",{type:"checkbox",id:"keep-check","onUpdate:modelValue":t[2]||(t[2]=e=>i.keepLoggedIn=e)},null,512),[[a.e8,i.keepLoggedIn]]),P]),(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"로그인")])}function W(e){return f.post("/login",e)}function q(e){return f.post("/register",e)}var H={login:W,register:q},K={data(){return{id:"",pw:"",keepLoggedIn:!1}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await H.login({id:this.id,pw:this.pw});this.keepLoggedIn?localStorage.setItem("user_id",e.user_id):sessionStorage.setItem("user_id",e.user_id),alert("로그인 성공"),this.$router.push("/main")}catch({status:e}){404===e?alert("존재하지 않는 아디디"):401===e&&alert("비밀번호 불일치")}}}};const X=(0,l.Z)(K,[["render",Z]]);var z=X;const G={id:"login-form"},Y={class:"login-text"},Q=(0,o._)("label",{for:"id"},"아이디",-1),ee={class:"login-text"},te=(0,o._)("label",{for:"pw"},"비밀번호",-1);function ne(e,t,n,s,i,r){return(0,o.wg)(),(0,o.iD)("div",G,[(0,o._)("div",Y,[Q,(0,o.wy)((0,o._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>i.id=e)},null,512),[[a.nr,i.id]])]),(0,o._)("div",ee,[te,(0,o.wy)((0,o._)("input",{type:"text",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>i.pw=e)},null,512),[[a.nr,i.pw]])]),(0,o._)("button",{onClick:t[2]||(t[2]=(...e)=>r.register&&r.register(...e))},"회원가입")])}var ae={data(){return{id:"",pw:""}},methods:{...(0,d.OI)(["SET_USER_ID"]),async register(){try{const{status:e}=await H.register({id:this.id,pw:this.pw});200===e&&this.$emit("ok",this.id)}catch({status:e}){409===e&&alert("존재하는 회원입니다")}}}};const oe=(0,l.Z)(ae,[["render",ne]]);var se=oe;function ie(e,t,n,a,i,r){return(0,o.wg)(),(0,o.iD)("button",{class:(0,s.C_)(r.buttonClass),onClick:t[0]||(t[0]=(...e)=>r.handleEvent&&r.handleEvent(...e)),onBlur:t[1]||(t[1]=(...e)=>r.handleEvent&&r.handleEvent(...e))},[(0,o._)("i",{class:(0,s.C_)(r.buttonInfo("iconClass"))},null,2),(0,o.Uk)(" "+(0,s.zw)(r.buttonInfo("text")),1)],34)}const re=[{name:"login",text:"로그인"},{name:"register",text:"회원가입"},{name:"logout",text:"로그아웃"},{name:"left",iconClass:"fa-solid fa-angle-left"},{name:"right",iconClass:"fa-solid fa-angle-right"},{name:"edit",iconClass:"fa-solid fa-pen-to-square",text:"수정"},{name:"remove",iconClass:"fa-solid fa-trash-can",text:"삭제"},{name:"add",iconClass:"fa-solid fa-circle-plus"},{name:"copy",iconClass:"fa-solid fa-clone",text:"복사"},{name:"ellipsis",iconClass:"fa-solid fa-ellipsis-vertical"},{name:"close",iconClass:"fa-solid fa-xmark"}];var le={props:{name:{type:String}},data(){return{lastEventTime:0,lastEvent:""}},computed:{button(){return re.find((e=>e.name===this.name))},buttonInfo(){return e=>this.button[e]},buttonClass(){return`button-${this.name}`}},methods:{handleEvent({type:e}){const t=`on${e[0].toUpperCase()}${e.slice(1)}`,n=Date.now(),a=n-this.lastEventTime;(t!==this.lastEvent||a>500)&&this.$emit(t,this.name),this.lastEvent=t,this.lastEventTime=n}}};const ue=(0,l.Z)(le,[["render",ie]]);var ce=ue,de={name:"AuthView",components:{LoginForm:z,RegisterForm:se,BaseButton:ce},data(){return{formNames:["login","register"],selectedIndex:0}},computed:{isFormSelected(){return e=>e===this.selectedIndex}},methods:{selectForm(e){this.selectedIndex=e}}};const pe=(0,l.Z)(de,[["render",R]]);var he=pe;const ge={id:"main",class:"box"},me=(0,o._)("h1",{id:"logo"},"해냄",-1);function fe(e,t,n,a,s,i){const r=(0,o.up)("base-button"),l=(0,o.up)("main-calendar"),u=(0,o.up)("main-list");return(0,o.wg)(),(0,o.iD)("div",ge,[(0,o._)("header",null,[me,(0,o.Wm)(r,{name:"logout",onOnClick:i.logout},null,8,["onOnClick"])]),(0,o.Wm)(l),(0,o.Wm)(u)])}const _e={class:"main-list"},ve={class:"title"},we={class:"journal-list"},ye=["data-id"],De=["onUpdate:modelValue","onChange"],Je=["value","data-id","onFocus"],Ee={class:"option"},Oe={class:"pending"};function Ie(e,t,n,i,r,l){const u=(0,o.up)("draggable"),c=(0,o.up)("base-button");return(0,o.wg)(),(0,o.iD)("div",_e,[(0,o._)("div",ve,[(0,o._)("h2",null,(0,s.zw)(e.getSelectedDate),1)]),(0,o._)("div",we,[(0,o.Wm)(u,(0,o.dG)({animation:150},{list:l.dailyJournals,onEnd:l.updateJournalIndex}),{item:(0,o.w5)((({element:e})=>[(0,o._)("div",{class:(0,s.C_)(["journal",{on:l.isSelectedJournal(e)}]),"data-id":e._id,onClick:t[4]||(t[4]=(...e)=>l.showOption&&l.showOption(...e))},[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checked=t,onChange:t=>l.editJournal(e)},null,40,De),[[a.e8,e.checked]]),(0,o._)("input",{type:"text",value:e.content,"data-id":e._id,readonly:!0,onFocus:t=>l.selectJournal(e),onDblclick:t[0]||(t[0]=(...e)=>l.startEditing&&l.startEditing(...e)),onBlur:t[1]||(t[1]=(...e)=>l.finishEditing&&l.finishEditing(...e)),onKeyup:[t[2]||(t[2]=(0,a.D2)(((...e)=>l.updateInputValue&&l.updateInputValue(...e)),["enter"])),t[3]||(t[3]=(0,a.D2)(((...e)=>l.handleBackspaceInput&&l.handleBackspaceInput(...e)),["backspace"]))]},null,40,Je)],10,ye)])),_:1},16,["list","onEnd"])]),(0,o._)("div",Ee,[(0,o._)("div",Oe,[(0,o.Wm)(c,{name:"add",onOnClick:l.addJournal},null,8,["onOnClick"]),(0,o._)("input",{type:"text",id:"pending-journal",placeholder:"추가하기",onKeyup:t[5]||(t[5]=(0,a.D2)(((...e)=>l.addJournal&&l.addJournal(...e)),["enter"]))},null,32)])])])}var Se=n(9980),be=n.n(Se),ke={components:{draggable:be(),BaseButton:ce},data(){return{selectedJournal:{},lastEventTime:0,journals:[],isShowOptions:!1}},computed:{...(0,d.rn)(["userId"]),...(0,d.Se)("journal",["getJournals","getSelectedDate"]),dailyJournals(){const e=this.getJournals.filter((e=>e?.date.startsWith(this.getSelectedDate)));return e},isSelectedJournal(){return({_id:e})=>this.selectedJournal._id==e},logo(){const e=this.dailyJournals?.filter((e=>!e.checked)),t=0!==this.dailyJournals?.length&&0===e?.length;return t?"해냄!":"해냄?"}},created(){this.init()},methods:{...(0,d.nv)("journal",["FETCH_JOURNALS","ADD_JOURNAL","EDIT_JOURNAL","REMOVE_JOURNAL"]),...(0,d.OI)("journal",["UPDATE_JOURNAL_INDEX"]),init(){this.FETCH_JOURNALS()},updateDate(e){const t=this.selectedDate.getDate()+e;this.selectedDate=new Date(this.selectedDate.setDate(t))},async addJournal(){const e=Date.now(),t=e-this.lastEventTime;if(this.lastEventTime=e,t<500)return;const n=document.querySelector("#pending-journal");if(n?.value)try{const e={content:n.value,date:this.getSelectedDate};await this.ADD_JOURNAL(e),n.value=""}catch(a){console.log(a)}},async editJournal(e){const t=Date.now(),n=t-this.lastEventTime;if(this.lastEventTime=t,n<500)return;const{_id:a,content:o,checked:s}=e||this.selectedJournal;this.deselectJournal();try{await this.EDIT_JOURNAL({_id:a,content:o,checked:s})}catch(i){console.log(i)}},handleBackspaceInput({target:{dataset:e,value:t},repeat:n}){n||t||this.removeJournal(e.id)},async removeJournal(e){try{await this.REMOVE_JOURNAL(e)}catch(t){console.log(t)}},selectJournal(e){this.selectedJournal=e},deselectJournal(){const{_id:e}=this.selectedJournal,t=document.querySelector(`[data-id="${e}"]`);t&&t.blur(),this.selectedJournal={}},updateJournalIndex({oldIndex:e,newIndex:t}){const n=e=>this.getJournals.findIndex((t=>t._id===this.dailyJournals[e]._id)),a=n(e),o=n(t);this.UPDATE_JOURNAL_INDEX({fromIndex:a,toIndex:o})},editInput(e){const t=document.querySelector(`[data-id="${e}"]`);this.startEditing({target:t})},startEditing({target:e}){e.readOnly=!1,e.focus()},finishEditing({target:e}){const{content:t=""}=this.getJournalById(e.dataset.id);e.readOnly=!0,e.value=t},updateInputValue({target:{dataset:e,value:t}}){const n=this.getJournalById(e.id);n.content=t,this.editJournal()},getJournalById(e){const t=this.dailyJournals.find((t=>t._id==e));return t??{}},toggleOptions(){this.isShowOptions=!this.isShowOptions},showOption({target:e}){console.dir(e)}}};const xe=(0,l.Z)(ke,[["render",Ie],["__scopeId","data-v-55c68571"]]);var Ce=xe;const Ue={class:"main-calendar"};function Ae(e,t,n,a,s,i){const r=(0,o.up)("v-calendar");return(0,o.wg)(),(0,o.iD)("div",Ue,[(0,o.Wm)(r,{"trim-weeks":"",transparent:"",borderless:"",expanded:"",attributes:i.attributeByDate,onDayclick:i.selectDate,onClick:i.selectDateByBox},null,8,["attributes","onDayclick","onClick"])])}var je={components:{},data(){return{}},computed:{...(0,d.Se)("journal",["getJournals","getSelectedDate"]),isSelected(){return({id:e})=>e===this.getSelectedDate},formattedJournals(){const e=e=>({dates:new Date(e.date),journal:e}),t=this.getJournals.map((t=>e(t)));return t},attributeByDate(){const e=new Date(this.getSelectedDate);return[{dates:e,highlight:!0,customData:"test1"}]}},methods:{...(0,d.OI)("journal",["SELECT_DATE"]),selectDateByBox({target:{className:e}}){const t=/id-([\w-]+)/,n=e.match(t)?.[1];n&&this.selectDate({id:n})},selectDate({id:e}){this.SELECT_DATE(e)}}};const Te=(0,l.Z)(je,[["render",Ae]]);var Le=Te,Re={name:"MainView",components:{MainList:Ce,MainCalendar:Le,BaseButton:ce},methods:{logout(){localStorage.clear(),sessionStorage.clear(),this.$router.push("/auth")}}};const Ne=(0,l.Z)(Re,[["render",fe]]);var Ve=Ne;const Be=(0,C.p7)({history:(0,C.PO)(),routes:[{path:"/",redirect:"/auth"},{path:"/auth",name:"AuthView",component:he},{path:"/main",name:"MainView",component:Ve}]});var Fe=Be,$e=n(1946);const Me=(0,a.ri)(c);Me.use(x),Me.use(Fe),Me.use($e.ZP,{}),Me.mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],s=e[c][2];for(var r=!0,l=0;l<a.length;l++)(!1&s||i>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(r=!1,s<i&&(i=s));if(r){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,i=a[0],r=a[1],l=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var c=l(n)}for(t&&t(a);u<i.length;u++)s=i[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5184)}));a=n.O(a)})();
//# sourceMappingURL=app.653b923c.js.map