(function(){"use strict";var e={8550:function(e,t,n){var o=n(9963),a=n(6252),i=n(3577);function s(e,t,n,o,s,r){const l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",{id:"wrapper",class:(0,i.C_)({on:r.isAuthView})},[(0,a.Wm)(l)],2)}n(7658);var r={name:"App",computed:{isAuthView(){return"AuthView"===this.$route.name}},created(){const e=localStorage.getItem("user_id")||sessionStorage.getItem("user_id"),t=e?"main":"auth";this.$router.push(`/${t}`)}},l=n(3744);const u=(0,l.Z)(r,[["render",s]]);var c=u,d=n(3907),p=n(6154);function g(e){return e.interceptors.request.use((e=>(e.headers["Content-Type"]="application/json",e)),(e=>Promise.reject(e.response))),e.interceptors.response.use((e=>e),(e=>Promise.reject(e.response))),e}function m(e,t){const n=p.Z.create(Object.assign({baseURL:e},t));return g(n),n}const h="https://haenam-387106.du.r.appspot.com",_=m(h),f="/journal";function w(e){return _.get(f,{params:e})}function v(e){return _.post(f,e)}function k(e){return _.put(f,e)}function y(e){return _["delete"](`${f}/${e}`)}var O={get:w,add:v,edit:k,remove:y},J=n(2262);const I=(0,J.qj)({journals:[],selectedJournal:{}}),D={getJournals(e){return JSON.parse(JSON.stringify(e.journals))},getSelectedJournal(e){return e.selectedJournal}},S={async FETCH_JOURNALS({commit:e}){try{const t=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:n}=await O.get({user_id:t});return n&&e("SET_JOURNALS",n),n}catch(t){console.log(t)}},async ADD_JOURNAL({commit:e},t){try{const n=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:o}=await O.add({user_id:n,...t});return e("ADD_JOURNAL",o[0]),o}catch(n){console.log(n)}},async EDIT_JOURNAL({commit:e},t){try{const{data:n}=await O.edit(t);return e("EDIT_JOURNAL",n),n}catch(n){console.log(n)}},async REMOVE_JOURNAL({commit:e},t){try{const{data:n}=await O.remove(t);return e("REMOVE_JOURNAL",t),n}catch(n){console.log(n)}}},U={SET_JOURNALS(e,t){e.journals=t},ADD_JOURNAL(e,t){e.journals.push(t)},EDIT_JOURNAL(e,t){const{_id:n}=t,o=e.journals.findIndex((e=>e._id===n));e.journals[o]=t,e.selectedJournal=e.journals[o]},REMOVE_JOURNAL(e,t){const n=e.journals.findIndex((e=>e._id==t));e.journals.splice(n,1)},SELECT_JOURNAL(e,t){e.selectedJournal=t}};var b={namespaced:!0,state:I,getters:D,actions:S,mutations:U},C=(0,d.MT)({state:{userId:""},getters:{getUserId(e){return e.userId}},actions:{},mutations:{SET_USER_ID(e,t){e.userId=t}},modules:{journal:b}}),E=n(2201);const j={id:"login",class:"box"},A={id:"login-left"},L=(0,a._)("h1",null,[(0,a.Uk)("오늘도 "),(0,a._)("span",null,"해냄!")],-1),R={id:"login-select"},x=(0,a._)("div",{id:"login-right"},null,-1);function T(e,t,n,o,s,r){const l=(0,a.up)("base-button"),u=(0,a.up)("sign-in-form"),c=(0,a.up)("sign-up-form");return(0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",A,[L,(0,a._)("div",R,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.formNames,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e,class:(0,i.C_)({on:r.isFormSelected(e)}),name:e,onOnClick:t=>r.selectForm(e)},null,8,["class","name","onOnClick"])))),128))]),r.isFormSelected("signIn")?((0,a.wg)(),(0,a.j4)(u,{key:0})):(0,a.kq)("",!0),r.isFormSelected("signUp")?((0,a.wg)(),(0,a.j4)(c,{key:1})):(0,a.kq)("",!0)]),x])}const N={id:"login-form"},V={class:"login-text"},F=(0,a._)("label",{for:"id"},"ID",-1),$={class:"login-text"},M=(0,a._)("label",{for:"pw"},"Password",-1),W={class:"login-keep"},q=(0,a._)("label",{for:"keep-check"},"로그인 상태 유지",-1);function B(e,t,n,i,s,r){return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",V,[F,(0,a.wy)((0,a._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>s.id=e)},null,512),[[o.nr,s.id]])]),(0,a._)("div",$,[M,(0,a.wy)((0,a._)("input",{type:"password",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>s.pw=e)},null,512),[[o.nr,s.pw]])]),(0,a._)("div",W,[(0,a.wy)((0,a._)("input",{type:"checkbox",id:"keep-check","onUpdate:modelValue":t[2]||(t[2]=e=>s.keepLoggedIn=e)},null,512),[[o.e8,s.keepLoggedIn]]),q]),(0,a._)("button",{onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"Sign In")])}function P(e){return _.post("/login",e)}function Z(e){return _.post("/register",e)}var H={login:P,register:Z},K={data(){return{id:"",pw:"",keepLoggedIn:!1}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await H.login({id:this.id,pw:this.pw});this.keepLoggedIn?localStorage.setItem("user_id",e.user_id):sessionStorage.setItem("user_id",e.user_id),this.$router.push("/main")}catch(e){console.log(e)}}}};const z=(0,l.Z)(K,[["render",B]]);var Y=z;const G={id:"login-form"},Q={class:"login-text"},X=(0,a._)("label",{for:"id"},"ID",-1),ee={class:"login-text"},te=(0,a._)("label",{for:"pw"},"Password",-1),ne={class:"login-keep"},oe=(0,a._)("label",{for:"keep-check"},"로그인 상태 유지",-1);function ae(e,t,n,i,s,r){return(0,a.wg)(),(0,a.iD)("div",G,[(0,a._)("div",Q,[X,(0,a.wy)((0,a._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>s.id=e)},null,512),[[o.nr,s.id]])]),(0,a._)("div",ee,[te,(0,a.wy)((0,a._)("input",{type:"text",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>s.pw=e)},null,512),[[o.nr,s.pw]])]),(0,a._)("div",ne,[(0,a.wy)((0,a._)("input",{type:"checkbox",id:"keep-check","onUpdate:modelValue":t[2]||(t[2]=e=>s.keepLoggedIn=e)},null,512),[[o.e8,s.keepLoggedIn]]),oe]),(0,a._)("button",{onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"Sign Up")])}var ie={data(){return{id:"",pw:"",keepLoggedIn:!1}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await H.login({id:this.id,pw:this.pw});this.keepLoggedIn?localStorage.setItem("user_id",e.user_id):sessionStorage.setItem("user_id",e.user_id),this.$router.push("/main")}catch(e){console.log(e)}}}};const se=(0,l.Z)(ie,[["render",ae]]);var re=se;function le(e,t,n,o,s,r){return(0,a.wg)(),(0,a.iD)("button",{class:(0,i.C_)(r.buttonClass),onClick:t[0]||(t[0]=(...e)=>r.handleClick&&r.handleClick(...e))},[(0,a._)("i",{class:(0,i.C_)(r.buttonInfo("iconClass"))},null,2),(0,a.Uk)(" "+(0,i.zw)(r.buttonInfo("text")),1)],2)}const ue=[{name:"signIn",text:"Sign In"},{name:"signUp",text:"Sign Up"},{name:"signOut",text:"Sign Out"},{name:"left",iconClass:"fa-solid fa-angle-left"},{name:"right",iconClass:"fa-solid fa-angle-right"},{name:"edit",iconClass:"fa-solid fa-pen-to-square"},{name:"remove",iconClass:"fa-solid fa-xmark"},{name:"add",iconClass:"fa-solid fa-circle-plus"}];var ce={props:{name:{type:String}},data(){return{lastClickTime:0}},computed:{button(){return ue.find((e=>e.name===this.name))},buttonInfo(){return e=>this.button[e]},buttonClass(){return`button-${this.name}`}},methods:{handleClick(){const e=Date.now(),t=e-this.lastClickTime;t>500&&this.$emit("onClick"),this.lastClickTime=e}}};const de=(0,l.Z)(ce,[["render",le]]);var pe=de,ge={name:"AuthView",components:{SignInForm:Y,SignUpForm:re,BaseButton:pe},data(){return{formNames:["signIn","signUp"],selectedForm:"signIn"}},computed:{isFormSelected(){return e=>e===this.selectedForm}},methods:{selectForm(e){this.selectedForm=e}}};const me=(0,l.Z)(ge,[["render",T]]);var he=me;const _e={id:"main",class:"box"},fe={id:"logo"},we={class:"title"},ve={class:"journal-list"},ke=["onUpdate:modelValue","onChange"],ye=["data-id","onUpdate:modelValue","onFocus"],Oe={class:"journal pending"};function Je(e,t,n,s,r,l){const u=(0,a.up)("base-button");return(0,a.wg)(),(0,a.iD)("div",_e,[(0,a._)("header",null,[(0,a._)("h1",fe,(0,i.zw)(l.logo),1),(0,a.Wm)(u,{name:"signOut",onOnClick:l.signOut},null,8,["onOnClick"])]),(0,a._)("div",we,[(0,a.Wm)(u,{name:"left",onOnClick:t[0]||(t[0]=e=>l.updateDate(-1))}),(0,a._)("h2",null,(0,i.zw)(l.dailyFormat),1),(0,a.Wm)(u,{name:"right",onOnClick:t[1]||(t[1]=e=>l.updateDate(1))})]),(0,a._)("div",ve,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.dailyJournals,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e._id,class:(0,i.C_)(["journal",{on:l.isSelectedJournal(e)}])},[(0,a.Wm)(u,{name:"edit",onOnClick:t[2]||(t[2]=e=>l.editJournal())}),(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checked=t,onChange:t=>l.editJournal(e)},null,40,ke),[[o.e8,e.checked]]),(0,a.wy)((0,a._)("input",{type:"text","data-id":e._id,"onUpdate:modelValue":t=>e.content=t,onFocus:t=>l.selectJournal(e),onKeyup:[t[3]||(t[3]=(0,o.D2)((e=>l.editJournal()),["enter"])),t[4]||(t[4]=(0,o.D2)(((...e)=>l.handleBackspaceInput&&l.handleBackspaceInput(...e)),["backspace"]))]},null,40,ye),[[o.nr,e.content]]),(0,a.Wm)(u,{name:"remove",onOnClick:t=>l.removeJournal(e._id)},null,8,["onOnClick"])],2)))),128))]),(0,a._)("div",Oe,[(0,a.Wm)(u,{name:"add",onOnClick:l.addJournal},null,8,["onOnClick"]),(0,a._)("input",{type:"text",id:"pending-journal",onKeyup:t[5]||(t[5]=(0,o.D2)(((...e)=>l.addJournal&&l.addJournal(...e)),["enter"]))},null,32)])])}var Ie={name:"MainView",components:{BaseButton:pe},data(){return{selectedDate:new Date,selectedJournal:{},lastEventTime:0}},computed:{...(0,d.rn)(["userId"]),...(0,d.Se)("journal",["getJournals"]),dailyFormat(){const e=e=>e.toISOString().slice(0,10);return e(this.selectedDate)},dailyJournals(){const e=this.getJournals.filter((e=>e?.date.startsWith(this.dailyFormat)));return e},isSelectedJournal(){return({_id:e})=>this.selectedJournal._id==e},logo(){const e=this.dailyJournals.filter((e=>!e.checked)),t=0!==this.dailyJournals.length&&0===e.length;return t?"해냄!":"해냄?"}},created(){this.init()},methods:{...(0,d.nv)("journal",["FETCH_JOURNALS","ADD_JOURNAL","EDIT_JOURNAL","REMOVE_JOURNAL"]),init(){this.FETCH_JOURNALS()},updateDate(e){const t=this.selectedDate.getDate()+e;this.selectedDate=new Date(this.selectedDate.setDate(t))},async addJournal(){const e=Date.now(),t=e-this.lastEventTime;if(this.lastEventTime=e,t<500)return;const n=document.querySelector("#pending-journal");if(n?.value)try{const e={content:n.value,date:this.selectedDate};await this.ADD_JOURNAL(e),n.value=""}catch(o){console.log(o)}},async editJournal(e){const t=Date.now(),n=t-this.lastEventTime;if(this.lastEventTime=t,n<500)return;const{_id:o,content:a,checked:i}=e||this.selectedJournal;try{await this.EDIT_JOURNAL({_id:o,content:a,checked:i}),e||this.deselectJournal()}catch(s){console.log(s)}},handleBackspaceInput({target:{dataset:e,value:t},repeat:n}){n||t||this.removeJournal(e.id)},async removeJournal(e){try{await this.REMOVE_JOURNAL(e)}catch(t){console.log(t)}},selectJournal(e){this.selectedJournal=e},deselectJournal(){const{_id:e}=this.selectedJournal,t=document.querySelector(`[data-id="${e}"]`);t.blur(),this.selectedJournal={}},signOut(){localStorage.clear(),sessionStorage.clear(),this.$router.push("/auth")}}};const De=(0,l.Z)(Ie,[["render",Je],["__scopeId","data-v-44e5e27c"]]);var Se=De;const Ue=(0,E.p7)({history:(0,E.PO)(),routes:[{path:"/",redirect:"/auth"},{path:"/auth",name:"AuthView",component:he},{path:"/main",name:"MainView",component:Se}]});var be=Ue;const Ce=(0,o.ri)(c);Ce.use(C),Ce.use(be),Ce.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(r=!1,i<s&&(s=i));if(r){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,s=o[0],r=o[1],l=o[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(l)var c=l(n)}for(t&&t(o);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(8550)}));o=n.O(o)})();
//# sourceMappingURL=app.bc217eb4.js.map