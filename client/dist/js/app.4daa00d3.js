(function(){"use strict";var e={5533:function(e,t,n){var o=n(9963),i=n(6252),a=n(3577);function s(e,t,n,o,s,r){const l=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",{id:"wrapper",class:(0,a.C_)({on:r.isAuthView})},[(0,i.Wm)(l)],2)}n(7658);var r={name:"App",computed:{isAuthView(){return"AuthView"===this.$route.name}},created(){const e=localStorage.getItem("user_id")||sessionStorage.getItem("user_id"),t=e?"main":"auth";this.$router.push(`/${t}`)}},l=n(3744);const u=(0,l.Z)(r,[["render",s]]);var c=u,d=n(3907),p=n(6154);function g(e){return e.interceptors.request.use((e=>(e.headers["Content-Type"]="application/json",e)),(e=>Promise.reject(e.response))),e.interceptors.response.use((e=>e),(e=>Promise.reject(e.response))),e}function h(e,t){const n=p.Z.create(Object.assign({baseURL:e},t));return g(n),n}const m="https://haenam-387106.du.r.appspot.com",_=h(m),f="/journal";function v(e){return _.get(f,{params:e})}function O(e){return _.post(f,e)}function w(e){return _.put(f,e)}function y(e){return _["delete"](`${f}/${e}`)}var D={get:v,add:O,edit:w,remove:y},E=n(2262);const I=(0,E.qj)({journals:[],selectedJournal:{},selectedDate:(new Date).toISOString().slice(0,10)}),S={getJournals(e){return JSON.parse(JSON.stringify(e.journals))},getSelectedJournal(e){return e.selectedJournal},getSelectedDate(e){return e.selectedDate}},b={async FETCH_JOURNALS({commit:e}){try{const t=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:n}=await D.get({user_id:t});return n&&e("SET_JOURNALS",n),n}catch(t){console.log(t)}},async ADD_JOURNAL({commit:e},t){try{const n=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:o}=await D.add({user_id:n,...t});return e("ADD_JOURNAL",o[0]),o}catch(n){console.log(n)}},async EDIT_JOURNAL({commit:e},t){try{const{data:n}=await D.edit(t);return e("EDIT_JOURNAL",n),n}catch(n){console.log(n)}},async REMOVE_JOURNAL({commit:e},t){try{const{data:n}=await D.remove(t);return e("REMOVE_JOURNAL",t),n}catch(n){console.log(n)}}},J={SET_JOURNALS(e,t){e.journals=t},ADD_JOURNAL(e,t){e.journals.push(t)},EDIT_JOURNAL(e,t){const{_id:n}=t,o=e.journals.findIndex((e=>e._id===n));e.journals[o]=t,e.selectedJournal=e.journals[o]},REMOVE_JOURNAL(e,t){const n=e.journals.findIndex((e=>e._id==t));n>-1&&e.journals.splice(n,1)},SELECT_JOURNAL(e,t){e.selectedJournal=t},SELECT_DATE(e,t){e.selectedDate=t},UPDATE_JOURNAL_INDEX(e,{fromIndex:t,toIndex:n}){const o=e.journals.splice(t,1)[0];e.journals.splice(n,0,o)}};var k={namespaced:!0,state:I,getters:S,actions:b,mutations:J},U=(0,d.MT)({state:{userId:""},getters:{getUserId(e){return e.userId}},actions:{},mutations:{SET_USER_ID(e,t){e.userId=t}},modules:{journal:k}}),C=n(2201);const x={id:"login",class:"box"},A={id:"login-left"},j=(0,i._)("h1",null,[(0,i.Uk)("오늘도 "),(0,i._)("span",null,"해냄!")],-1),L={id:"login-select"},T=(0,i._)("div",{id:"login-right"},null,-1);function R(e,t,n,o,s,r){const l=(0,i.up)("base-button"),u=(0,i.up)("sign-in-form"),c=(0,i.up)("sign-up-form");return(0,i.wg)(),(0,i.iD)("div",x,[(0,i._)("div",A,[j,(0,i._)("div",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.formNames,(e=>((0,i.wg)(),(0,i.j4)(l,{key:e,class:(0,a.C_)({on:r.isFormSelected(e)}),name:e,onOnClick:t=>r.selectForm(e)},null,8,["class","name","onOnClick"])))),128))]),r.isFormSelected("signIn")?((0,i.wg)(),(0,i.j4)(u,{key:0})):(0,i.kq)("",!0),r.isFormSelected("signUp")?((0,i.wg)(),(0,i.j4)(c,{key:1})):(0,i.kq)("",!0)]),T])}const N={id:"login-form"},B={class:"login-text"},V=(0,i._)("label",{for:"id"},"아이디",-1),F={class:"login-text"},$=(0,i._)("label",{for:"pw"},"비밀번호",-1),M={class:"login-keep"},P=(0,i._)("label",{for:"keep-check"},"로그인 상태 유지",-1);function Z(e,t,n,a,s,r){return(0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("div",B,[V,(0,i.wy)((0,i._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>s.id=e)},null,512),[[o.nr,s.id]])]),(0,i._)("div",F,[$,(0,i.wy)((0,i._)("input",{type:"password",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>s.pw=e)},null,512),[[o.nr,s.pw]])]),(0,i._)("div",M,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"keep-check","onUpdate:modelValue":t[2]||(t[2]=e=>s.keepLoggedIn=e)},null,512),[[o.e8,s.keepLoggedIn]]),P]),(0,i._)("button",{onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"로그인")])}function W(e){return _.post("/login",e)}function q(e){return _.post("/register",e)}var H={login:W,register:q},K={data(){return{id:"",pw:"",keepLoggedIn:!1}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await H.login({id:this.id,pw:this.pw});this.keepLoggedIn?localStorage.setItem("user_id",e.user_id):sessionStorage.setItem("user_id",e.user_id),this.$router.push("/main")}catch(e){console.log(e)}}}};const X=(0,l.Z)(K,[["render",Z]]);var z=X;const Y={id:"login-form"},G={class:"login-text"},Q=(0,i._)("label",{for:"id"},"아이디",-1),ee={class:"login-text"},te=(0,i._)("label",{for:"pw"},"비밀번호",-1),ne={class:"login-keep"},oe=(0,i._)("label",{for:"keep-check"},"로그인 상태 유지",-1);function ie(e,t,n,a,s,r){return(0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",G,[Q,(0,i.wy)((0,i._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>s.id=e)},null,512),[[o.nr,s.id]])]),(0,i._)("div",ee,[te,(0,i.wy)((0,i._)("input",{type:"text",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>s.pw=e)},null,512),[[o.nr,s.pw]])]),(0,i._)("div",ne,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"keep-check","onUpdate:modelValue":t[2]||(t[2]=e=>s.keepLoggedIn=e)},null,512),[[o.e8,s.keepLoggedIn]]),oe]),(0,i._)("button",{onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"로그인")])}var ae={data(){return{id:"",pw:"",keepLoggedIn:!1}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await H.login({id:this.id,pw:this.pw});this.keepLoggedIn?localStorage.setItem("user_id",e.user_id):sessionStorage.setItem("user_id",e.user_id),this.$router.push("/main")}catch(e){console.log(e)}}}};const se=(0,l.Z)(ae,[["render",ie]]);var re=se;function le(e,t,n,o,s,r){return(0,i.wg)(),(0,i.iD)("button",{class:(0,a.C_)(r.buttonClass),onClick:t[0]||(t[0]=(...e)=>r.handleEvent&&r.handleEvent(...e)),onBlur:t[1]||(t[1]=(...e)=>r.handleEvent&&r.handleEvent(...e))},[(0,i._)("i",{class:(0,a.C_)(r.buttonInfo("iconClass"))},null,2),(0,i.Uk)(" "+(0,a.zw)(r.buttonInfo("text")),1)],34)}const ue=[{name:"signIn",text:"로그인"},{name:"signUp",text:"회원가입"},{name:"signOut",text:"로그아웃"},{name:"left",iconClass:"fa-solid fa-angle-left"},{name:"right",iconClass:"fa-solid fa-angle-right"},{name:"edit",iconClass:"fa-solid fa-pen-to-square",text:"수정"},{name:"remove",iconClass:"fa-solid fa-trash-can",text:"삭제"},{name:"add",iconClass:"fa-solid fa-circle-plus"},{name:"copy",iconClass:"fa-solid fa-clone",text:"복사"},{name:"ellipsis",iconClass:"fa-solid fa-ellipsis-vertical"},{name:"close",iconClass:"fa-solid fa-xmark"}];var ce={props:{name:{type:String}},data(){return{lastEventTime:0,lastEvent:""}},computed:{button(){return ue.find((e=>e.name===this.name))},buttonInfo(){return e=>this.button[e]},buttonClass(){return`button-${this.name}`}},methods:{handleEvent({type:e}){const t=`on${e[0].toUpperCase()}${e.slice(1)}`,n=Date.now(),o=n-this.lastEventTime;(t!==this.lastEvent||o>500)&&this.$emit(t,this.name),this.lastEvent=t,this.lastEventTime=n}}};const de=(0,l.Z)(ce,[["render",le]]);var pe=de,ge={name:"AuthView",components:{SignInForm:z,SignUpForm:re,BaseButton:pe},data(){return{formNames:["signIn","signUp"],selectedForm:"signIn"}},computed:{isFormSelected(){return e=>e===this.selectedForm}},methods:{selectForm(e){this.selectedForm=e}}};const he=(0,l.Z)(ge,[["render",R]]);var me=he;const _e={id:"main",class:"box"},fe=(0,i._)("h1",{id:"logo"},"해냄",-1);function ve(e,t,n,o,a,s){const r=(0,i.up)("base-button"),l=(0,i.up)("main-calendar"),u=(0,i.up)("main-list");return(0,i.wg)(),(0,i.iD)("div",_e,[(0,i._)("header",null,[fe,(0,i.Wm)(r,{name:"signOut",onOnClick:s.signOut},null,8,["onOnClick"])]),(0,i.Wm)(l),(0,i.Wm)(u)])}const Oe={class:"main-list"},we={class:"title"},ye={class:"journal-list"},De=["onUpdate:modelValue","onChange"],Ee=["value","data-id","onFocus"],Ie={class:"pending"};function Se(e,t,n,s,r,l){const u=(0,i.up)("base-button-option"),c=(0,i.up)("draggable"),d=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("div",Oe,[(0,i._)("div",we,[(0,i._)("h2",null,(0,a.zw)(e.getSelectedDate),1)]),(0,i._)("div",ye,[(0,i.Wm)(c,(0,i.dG)({animation:150},{list:l.dailyJournals,onEnd:l.updateJournalIndex}),{item:(0,i.w5)((({element:e})=>[(0,i._)("div",{class:(0,a.C_)(["journal",{on:l.isSelectedJournal(e)}])},[(0,i.Wm)(u,{onEdit:t=>l.editInput(e._id),onRemove:t=>l.removeJournal(e._id)},null,8,["onEdit","onRemove"]),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checked=t,onChange:t=>l.editJournal(e)},null,40,De),[[o.e8,e.checked]]),(0,i._)("input",{type:"text",value:e.content,"data-id":e._id,readonly:!0,onFocus:t=>l.selectJournal(e),onDblclick:t[0]||(t[0]=(...e)=>l.startEditing&&l.startEditing(...e)),onBlur:t[1]||(t[1]=(...e)=>l.finishEditing&&l.finishEditing(...e)),onKeyup:[t[2]||(t[2]=(0,o.D2)(((...e)=>l.updateInputValue&&l.updateInputValue(...e)),["enter"])),t[3]||(t[3]=(0,o.D2)(((...e)=>l.handleBackspaceInput&&l.handleBackspaceInput(...e)),["backspace"]))]},null,40,Ee)],2)])),_:1},16,["list","onEnd"])]),(0,i._)("div",Ie,[(0,i.Wm)(d,{name:"add",onOnClick:l.addJournal},null,8,["onOnClick"]),(0,i._)("input",{type:"text",id:"pending-journal",onKeyup:t[4]||(t[4]=(0,o.D2)(((...e)=>l.addJournal&&l.addJournal(...e)),["enter"]))},null,32)])])}var be=n(9980),Je=n.n(be);const ke={class:"button-option"};function Ue(e,t,n,o,s,r){const l=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("div",ke,[(0,i.Wm)(l,{class:"main-button",name:r.buttonName,onOnClick:r.toggleOption,onOnBlur:r.hideOption},null,8,["name","onOnClick","onOnBlur"]),(0,i._)("div",{class:(0,a.C_)(["option-box",{on:s.isShowOption}])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.options,(e=>((0,i.wg)(),(0,i.j4)(l,{key:e,name:e,onOnClick:r.selectOption},null,8,["name","onOnClick"])))),128))],2)])}var Ce={components:{BaseButton:pe},data(){return{isShowOption:!1,options:["copy","edit","remove"],selectedOption:""}},computed:{buttonName(){return this.isShowOption?"close":"ellipsis"}},methods:{toggleOption(){this.isShowOption=!this.isShowOption},showOption(){this.isShowOption=!0},hideOption(){this.isShowOption=!1},selectOption(e){this.$emit(e)}}};const xe=(0,l.Z)(Ce,[["render",Ue],["__scopeId","data-v-ed5d616a"]]);var Ae=xe,je={components:{draggable:Je(),BaseButton:pe,BaseButtonOption:Ae},data(){return{selectedJournal:{},lastEventTime:0,journals:[],isShowOptions:!1}},computed:{...(0,d.rn)(["userId"]),...(0,d.Se)("journal",["getJournals","getSelectedDate"]),dailyJournals(){const e=this.getJournals.filter((e=>e?.date.startsWith(this.getSelectedDate)));return e},isSelectedJournal(){return({_id:e})=>this.selectedJournal._id==e},logo(){const e=this.dailyJournals?.filter((e=>!e.checked)),t=0!==this.dailyJournals?.length&&0===e?.length;return t?"해냄!":"해냄?"}},created(){this.init()},methods:{...(0,d.nv)("journal",["FETCH_JOURNALS","ADD_JOURNAL","EDIT_JOURNAL","REMOVE_JOURNAL"]),...(0,d.OI)("journal",["UPDATE_JOURNAL_INDEX"]),init(){this.FETCH_JOURNALS()},updateDate(e){const t=this.selectedDate.getDate()+e;this.selectedDate=new Date(this.selectedDate.setDate(t))},async addJournal(){const e=Date.now(),t=e-this.lastEventTime;if(this.lastEventTime=e,t<500)return;const n=document.querySelector("#pending-journal");if(n?.value)try{const e={content:n.value,date:this.getSelectedDate};await this.ADD_JOURNAL(e),n.value=""}catch(o){console.log(o)}},async editJournal(e){const t=Date.now(),n=t-this.lastEventTime;if(this.lastEventTime=t,n<500)return;const{_id:o,content:i,checked:a}=e||this.selectedJournal;this.deselectJournal();try{await this.EDIT_JOURNAL({_id:o,content:i,checked:a})}catch(s){console.log(s)}},handleBackspaceInput({target:{dataset:e,value:t},repeat:n}){n||t||this.removeJournal(e.id)},async removeJournal(e){try{await this.REMOVE_JOURNAL(e)}catch(t){console.log(t)}},selectJournal(e){this.selectedJournal=e},deselectJournal(){const{_id:e}=this.selectedJournal,t=document.querySelector(`[data-id="${e}"]`);t&&t.blur(),this.selectedJournal={}},updateJournalIndex({oldIndex:e,newIndex:t}){const n=e=>this.getJournals.findIndex((t=>t._id===this.dailyJournals[e]._id)),o=n(e),i=n(t);this.UPDATE_JOURNAL_INDEX({fromIndex:o,toIndex:i})},editInput(e){const t=document.querySelector(`[data-id="${e}"]`);this.startEditing({target:t})},startEditing({target:e}){e.readOnly=!1,e.focus()},finishEditing({target:e}){const{content:t=""}=this.getJournalById(e.dataset.id);e.readOnly=!0,e.value=t},updateInputValue({target:{dataset:e,value:t}}){const n=this.getJournalById(e.id);n.content=t,this.editJournal()},getJournalById(e){const t=this.dailyJournals.find((t=>t._id==e));return t??{}},toggleOptions(){this.isShowOptions=!this.isShowOptions}}};const Le=(0,l.Z)(je,[["render",Se],["__scopeId","data-v-b74f744e"]]);var Te=Le;const Re={class:"main-calendar"};function Ne(e,t,n,o,a,s){const r=(0,i.up)("v-calendar");return(0,i.wg)(),(0,i.iD)("div",Re,[(0,i.Wm)(r,{"trim-weeks":"",transparent:"",borderless:"",expanded:"",attributes:[s.attributeByDate],onDayclick:s.selectDate,onClick:s.selectDateByBox},null,8,["attributes","onDayclick","onClick"])])}var Be={components:{},data(){return{}},computed:{...(0,d.Se)("journal",["getSelectedDate"]),attributeByDate(){const e=new Date(this.getSelectedDate);return{highlight:!0,dates:e}}},methods:{...(0,d.OI)("journal",["SELECT_DATE"]),selectDateByBox({target:{className:e}}){const t=/id-([\w-]+)/,n=e.match(t)?.[1];n&&this.selectDate({id:n})},selectDate({id:e}){this.SELECT_DATE(e)}}};const Ve=(0,l.Z)(Be,[["render",Ne]]);var Fe=Ve,$e={name:"MainView",components:{MainList:Te,MainCalendar:Fe,BaseButton:pe},methods:{signOut(){localStorage.clear(),sessionStorage.clear(),this.$router.push("/auth")}}};const Me=(0,l.Z)($e,[["render",ve]]);var Pe=Me;const Ze=(0,C.p7)({history:(0,C.PO)(),routes:[{path:"/",redirect:"/auth"},{path:"/auth",name:"AuthView",component:me},{path:"/main",name:"MainView",component:Pe}]});var We=Ze,qe=n(1946);const He=(0,o.ri)(c);He.use(U),He.use(We),He.use(qe.ZP,{}),He.mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,a){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],a=e[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(r=!1,a<s&&(s=a));if(r){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,a,s=o[0],r=o[1],l=o[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)var c=l(n)}for(t&&t(o);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5533)}));o=n.O(o)})();
//# sourceMappingURL=app.4daa00d3.js.map