(function(){"use strict";var e={3913:function(e,t,n){var o=n(9963),a=n(6252),i=n(3577);function s(e,t,n,o,s,r){const l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",{id:"wrapper",class:(0,i.C_)({on:r.isAuthView})},[(0,a.Wm)(l)],2)}n(7658);var r={name:"App",computed:{isAuthView(){return"AuthView"===this.$route.name}},created(){const e=localStorage.getItem("user_id")||sessionStorage.getItem("user_id"),t=e?"main":"auth";this.$router.push(`/${t}`)}},l=n(3744);const u=(0,l.Z)(r,[["render",s]]);var c=u,d=n(3907),p=n(6154);function g(e){return e.interceptors.request.use((e=>(e.headers["Content-Type"]="application/json",e)),(e=>Promise.reject(e.response))),e.interceptors.response.use((e=>e),(e=>Promise.reject(e.response))),e}function m(e,t){const n=p.Z.create(Object.assign({baseURL:e},t));return g(n),n}const h="https://haenam-387106.du.r.appspot.com",_=m(h),f="/journal";function v(e){return _.get(f,{params:e})}function y(e){return _.post(f,e)}function w(e){return _.put(f,e)}function D(e){return _["delete"](`${f}/${e}`)}var I={get:v,add:y,edit:w,remove:D},k=n(2262);const J=(0,k.qj)({journals:[],selectedJournal:{},selectedDate:(new Date).toISOString().slice(0,10)}),O={getJournals(e){return JSON.parse(JSON.stringify(e.journals))},getSelectedJournal(e){return e.selectedJournal},getSelectedDate(e){return e.selectedDate}},S={async FETCH_JOURNALS({commit:e}){try{const t=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:n}=await I.get({user_id:t});return n&&e("SET_JOURNALS",n),n}catch(t){console.log(t)}},async ADD_JOURNAL({commit:e},t){try{const n=sessionStorage.getItem("user_id")||localStorage.getItem("user_id"),{data:o}=await I.add({user_id:n,...t});return e("ADD_JOURNAL",o[0]),o}catch(n){console.log(n)}},async EDIT_JOURNAL({commit:e},t){try{const{data:n}=await I.edit(t);return e("EDIT_JOURNAL",n),n}catch(n){console.log(n)}},async REMOVE_JOURNAL({commit:e},t){try{const{data:n}=await I.remove(t);return e("REMOVE_JOURNAL",t),n}catch(n){console.log(n)}}},b={SET_JOURNALS(e,t){e.journals=t},ADD_JOURNAL(e,t){e.journals.push(t)},EDIT_JOURNAL(e,t){const{_id:n}=t,o=e.journals.findIndex((e=>e._id===n));e.journals[o]=t,e.selectedJournal=e.journals[o]},REMOVE_JOURNAL(e,t){const n=e.journals.findIndex((e=>e._id==t));e.journals.splice(n,1)},SELECT_JOURNAL(e,t){e.selectedJournal=t},SELECT_DATE(e,t){e.selectedDate=t},UPDATE_JOURNAL_INDEX(e,{fromIndex:t,toIndex:n}){const o=e.journals.splice(t,1)[0];e.journals.splice(n,0,o)}};var E={namespaced:!0,state:J,getters:O,actions:S,mutations:b},C=(0,d.MT)({state:{userId:""},getters:{getUserId(e){return e.userId}},actions:{},mutations:{SET_USER_ID(e,t){e.userId=t}},modules:{journal:E}}),U=n(2201);const A={id:"login",class:"box"},j={id:"login-left"},L=(0,a._)("h1",null,[(0,a.Uk)("오늘도 "),(0,a._)("span",null,"해냄!")],-1),x={id:"login-select"},T=(0,a._)("div",{id:"login-right"},null,-1);function R(e,t,n,o,s,r){const l=(0,a.up)("base-button"),u=(0,a.up)("sign-in-form"),c=(0,a.up)("sign-up-form");return(0,a.wg)(),(0,a.iD)("div",A,[(0,a._)("div",j,[L,(0,a._)("div",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.formNames,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e,class:(0,i.C_)({on:r.isFormSelected(e)}),name:e,onOnClick:t=>r.selectForm(e)},null,8,["class","name","onOnClick"])))),128))]),r.isFormSelected("signIn")?((0,a.wg)(),(0,a.j4)(u,{key:0})):(0,a.kq)("",!0),r.isFormSelected("signUp")?((0,a.wg)(),(0,a.j4)(c,{key:1})):(0,a.kq)("",!0)]),T])}const N={id:"login-form"},V={class:"login-text"},B=(0,a._)("label",{for:"id"},"ID",-1),F={class:"login-text"},M=(0,a._)("label",{for:"pw"},"Password",-1),P={class:"login-keep"},$=(0,a._)("label",{for:"keep-check"},"로그인 상태 유지",-1);function W(e,t,n,i,s,r){return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",V,[B,(0,a.wy)((0,a._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>s.id=e)},null,512),[[o.nr,s.id]])]),(0,a._)("div",F,[M,(0,a.wy)((0,a._)("input",{type:"password",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>s.pw=e)},null,512),[[o.nr,s.pw]])]),(0,a._)("div",P,[(0,a.wy)((0,a._)("input",{type:"checkbox",id:"keep-check","onUpdate:modelValue":t[2]||(t[2]=e=>s.keepLoggedIn=e)},null,512),[[o.e8,s.keepLoggedIn]]),$]),(0,a._)("button",{onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"Sign In")])}function Z(e){return _.post("/login",e)}function q(e){return _.post("/register",e)}var H={login:Z,register:q},K={data(){return{id:"",pw:"",keepLoggedIn:!1}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await H.login({id:this.id,pw:this.pw});this.keepLoggedIn?localStorage.setItem("user_id",e.user_id):sessionStorage.setItem("user_id",e.user_id),this.$router.push("/main")}catch(e){console.log(e)}}}};const X=(0,l.Z)(K,[["render",W]]);var z=X;const G={id:"login-form"},Y={class:"login-text"},Q=(0,a._)("label",{for:"id"},"ID",-1),ee={class:"login-text"},te=(0,a._)("label",{for:"pw"},"Password",-1),ne={class:"login-keep"},oe=(0,a._)("label",{for:"keep-check"},"로그인 상태 유지",-1);function ae(e,t,n,i,s,r){return(0,a.wg)(),(0,a.iD)("div",G,[(0,a._)("div",Y,[Q,(0,a.wy)((0,a._)("input",{type:"text",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>s.id=e)},null,512),[[o.nr,s.id]])]),(0,a._)("div",ee,[te,(0,a.wy)((0,a._)("input",{type:"text",id:"pw","onUpdate:modelValue":t[1]||(t[1]=e=>s.pw=e)},null,512),[[o.nr,s.pw]])]),(0,a._)("div",ne,[(0,a.wy)((0,a._)("input",{type:"checkbox",id:"keep-check","onUpdate:modelValue":t[2]||(t[2]=e=>s.keepLoggedIn=e)},null,512),[[o.e8,s.keepLoggedIn]]),oe]),(0,a._)("button",{onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"Sign Up")])}var ie={data(){return{id:"",pw:"",keepLoggedIn:!1}},methods:{...(0,d.OI)(["SET_USER_ID"]),async login(){try{const{data:e}=await H.login({id:this.id,pw:this.pw});this.keepLoggedIn?localStorage.setItem("user_id",e.user_id):sessionStorage.setItem("user_id",e.user_id),this.$router.push("/main")}catch(e){console.log(e)}}}};const se=(0,l.Z)(ie,[["render",ae]]);var re=se;function le(e,t,n,o,s,r){return(0,a.wg)(),(0,a.iD)("button",{class:(0,i.C_)(r.buttonClass),onClick:t[0]||(t[0]=(...e)=>r.handleClick&&r.handleClick(...e))},[(0,a._)("i",{class:(0,i.C_)(r.buttonInfo("iconClass"))},null,2),(0,a.Uk)(" "+(0,i.zw)(r.buttonInfo("text")),1)],2)}const ue=[{name:"signIn",text:"Sign In"},{name:"signUp",text:"Sign Up"},{name:"signOut",text:"Sign Out"},{name:"left",iconClass:"fa-solid fa-angle-left"},{name:"right",iconClass:"fa-solid fa-angle-right"},{name:"edit",iconClass:"fa-solid fa-pen-to-square"},{name:"remove",iconClass:"fa-solid fa-xmark"},{name:"add",iconClass:"fa-solid fa-circle-plus"}];var ce={props:{name:{type:String}},data(){return{lastClickTime:0}},computed:{button(){return ue.find((e=>e.name===this.name))},buttonInfo(){return e=>this.button[e]},buttonClass(){return`button-${this.name}`}},methods:{handleClick(){const e=Date.now(),t=e-this.lastClickTime;t>500&&this.$emit("onClick"),this.lastClickTime=e}}};const de=(0,l.Z)(ce,[["render",le]]);var pe=de,ge={name:"AuthView",components:{SignInForm:z,SignUpForm:re,BaseButton:pe},data(){return{formNames:["signIn","signUp"],selectedForm:"signIn"}},computed:{isFormSelected(){return e=>e===this.selectedForm}},methods:{selectForm(e){this.selectedForm=e}}};const me=(0,l.Z)(ge,[["render",R]]);var he=me;const _e={id:"main",class:"box"},fe=(0,a._)("h1",{id:"logo"},"해냄",-1);function ve(e,t,n,o,i,s){const r=(0,a.up)("base-button"),l=(0,a.up)("main-calendar"),u=(0,a.up)("main-list");return(0,a.wg)(),(0,a.iD)("div",_e,[(0,a._)("header",null,[fe,(0,a.Wm)(r,{name:"signOut",onOnClick:s.signOut},null,8,["onOnClick"])]),(0,a.Wm)(l),(0,a.Wm)(u)])}const ye={class:"main-list"},we={class:"title"},De={class:"journal-list"},Ie=["value","onChange"],ke=["value","data-id","onFocus"],Je={class:"pending"};function Oe(e,t,n,s,r,l){const u=(0,a.up)("base-button"),c=(0,a.up)("draggable");return(0,a.wg)(),(0,a.iD)("div",ye,[(0,a._)("div",we,[(0,a._)("h2",null,(0,i.zw)(e.getSelectedDate),1)]),(0,a._)("div",De,[(0,a.Wm)(c,(0,a.dG)({animation:150},{list:l.dailyJournals,onEnd:l.updateJournalIndex}),{item:(0,a.w5)((({element:e})=>[(0,a._)("div",{class:(0,i.C_)(["journal",{on:l.isSelectedJournal(e)}])},[(0,a._)("input",{type:"checkbox",value:e.checked,onChange:t=>l.editJournal(e)},null,40,Ie),(0,a._)("input",{type:"text",value:e.content,"data-id":e._id,readonly:!0,onFocus:t=>l.selectJournal(e),onDblclick:t[0]||(t[0]=(...e)=>l.startEditing&&l.startEditing(...e)),onBlur:t[1]||(t[1]=(...e)=>l.finishEditing&&l.finishEditing(...e)),onKeyup:[t[2]||(t[2]=(0,o.D2)(((...e)=>l.updateInputValue&&l.updateInputValue(...e)),["enter"])),t[3]||(t[3]=(0,o.D2)(((...e)=>l.handleBackspaceInput&&l.handleBackspaceInput(...e)),["backspace"]))]},null,40,ke),(0,a.Wm)(u,{name:"edit",onOnClick:t[4]||(t[4]=e=>l.editJournal())}),(0,a.Wm)(u,{name:"remove",onOnClick:t=>l.removeJournal(e._id)},null,8,["onOnClick"])],2)])),_:1},16,["list","onEnd"])]),(0,a._)("div",Je,[(0,a.Wm)(u,{name:"add",onOnClick:l.addJournal},null,8,["onOnClick"]),(0,a._)("input",{type:"text",id:"pending-journal",onKeyup:t[5]||(t[5]=(0,o.D2)(((...e)=>l.addJournal&&l.addJournal(...e)),["enter"]))},null,32)])])}var Se=n(9980),be=n.n(Se),Ee={components:{BaseButton:pe,draggable:be()},data(){return{selectedJournal:{},lastEventTime:0,journals:[]}},computed:{...(0,d.rn)(["userId"]),...(0,d.Se)("journal",["getJournals","getSelectedDate"]),dailyJournals(){const e=this.getJournals.filter((e=>e?.date.startsWith(this.getSelectedDate)));return e},isSelectedJournal(){return({_id:e})=>this.selectedJournal._id==e},logo(){const e=this.dailyJournals?.filter((e=>!e.checked)),t=0!==this.dailyJournals?.length&&0===e?.length;return t?"해냄!":"해냄?"}},created(){this.init()},methods:{...(0,d.nv)("journal",["FETCH_JOURNALS","ADD_JOURNAL","EDIT_JOURNAL","REMOVE_JOURNAL"]),...(0,d.OI)("journal",["UPDATE_JOURNAL_INDEX"]),init(){this.FETCH_JOURNALS()},updateDate(e){const t=this.selectedDate.getDate()+e;this.selectedDate=new Date(this.selectedDate.setDate(t))},async addJournal(){const e=Date.now(),t=e-this.lastEventTime;if(this.lastEventTime=e,t<500)return;const n=document.querySelector("#pending-journal");if(n?.value)try{const e={content:n.value,date:this.getSelectedDate};await this.ADD_JOURNAL(e),n.value=""}catch(o){console.log(o)}},async editJournal(e){const t=Date.now(),n=t-this.lastEventTime;if(this.lastEventTime=t,n<500)return;const{_id:o,content:a,checked:i}=e||this.selectedJournal;this.deselectJournal();try{await this.EDIT_JOURNAL({_id:o,content:a,checked:i})}catch(s){console.log(s)}},handleBackspaceInput({target:{dataset:e,value:t},repeat:n}){n||t||this.removeJournal(e.id)},async removeJournal(e){try{await this.REMOVE_JOURNAL(e)}catch(t){console.log(t)}},selectJournal(e){this.selectedJournal=e},deselectJournal(){const{_id:e}=this.selectedJournal,t=document.querySelector(`[data-id="${e}"]`);t.blur(),this.selectedJournal={}},updateJournalIndex({oldIndex:e,newIndex:t}){this.UPDATE_JOURNAL_INDEX({fromIndex:e,toIndex:t})},startEditing({target:e}){e.readOnly=!1},finishEditing({target:e}){const{content:t=""}=this.getJournalById(e.dataset.id);e.readOnly=!0,e.value=t},updateInputValue({target:{dataset:e,value:t}}){const n=this.getJournalById(e.id);n.content=t,this.editJournal()},getJournalById(e){const t=this.dailyJournals.find((t=>t._id==e));return t??{}}}};const Ce=(0,l.Z)(Ee,[["render",Oe],["__scopeId","data-v-4fe1ba53"]]);var Ue=Ce;const Ae={class:"main-calendar"};function je(e,t,n,o,i,s){const r=(0,a.up)("v-calendar");return(0,a.wg)(),(0,a.iD)("div",Ae,[(0,a.Wm)(r,{"trim-weeks":"",transparent:"",borderless:"",expanded:"",attributes:[s.attributeByDate],onDayclick:s.selectDate,onClick:s.selectDateByBox},null,8,["attributes","onDayclick","onClick"])])}var Le={components:{},data(){return{}},computed:{...(0,d.Se)("journal",["getSelectedDate"]),attributeByDate(){const e=new Date(this.getSelectedDate);return{highlight:!0,dates:e}}},methods:{...(0,d.OI)("journal",["SELECT_DATE"]),selectDateByBox({target:{className:e}}){const t=/id-([\w-]+)/,n=e.match(t)?.[1];n&&this.selectDate({id:n})},selectDate({id:e}){this.SELECT_DATE(e)}}};const xe=(0,l.Z)(Le,[["render",je],["__scopeId","data-v-ae01e286"]]);var Te=xe,Re={name:"MainView",components:{MainList:Ue,MainCalendar:Te,BaseButton:pe},methods:{signOut(){localStorage.clear(),sessionStorage.clear(),this.$router.push("/auth")}}};const Ne=(0,l.Z)(Re,[["render",ve]]);var Ve=Ne;const Be=(0,U.p7)({history:(0,U.PO)(),routes:[{path:"/",redirect:"/auth"},{path:"/auth",name:"AuthView",component:he},{path:"/main",name:"MainView",component:Ve}]});var Fe=Be,Me=n(1946);const Pe=(0,o.ri)(c);Pe.use(C),Pe.use(Fe),Pe.use(Me.ZP,{}),Pe.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(r=!1,i<s&&(s=i));if(r){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,s=o[0],r=o[1],l=o[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(l)var c=l(n)}for(t&&t(o);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3913)}));o=n.O(o)})();
//# sourceMappingURL=app.17a11a28.js.map